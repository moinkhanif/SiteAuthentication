/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";const e=(e,n)=>{"v2"!==n?(e=>{const n=document.createElement("meta");n.name="robots",n.content="noindex, nofollow",document.head.appendChild(n);const t=document.createElement("link");t.rel="canonical",t.href="container.htm",document.head.appendChild(t);const a=document.createElement("script");a.type="text/javascript",a.src=e,a.onload=()=>{$BV.container("global",{})},document.body.appendChild(a)})(e):(e=>{const n=document.createElement("meta");n.name="robots",n.content="noindex, nofollow",document.head.appendChild(n);const t=document.createElement("link");t.rel="canonical",t.href="container.htm",document.head.appendChild(t);const a=document.createElement("meta");a.name="bv:pageType",a.content="container";const o=document.createElement("script");o.type="text/javascript",o.src=e,document.body.appendChild(o)})(e)},n=(e,n,t,a)=>{console.log("loading scout and product",e,n,t);const o=document.createElement("script");if(o.src=e,document.head.appendChild(o),"v2"===a){const e=document.createElement("div");e.id="product",e.setAttribute("data-bv-show",t),e.setAttribute("data-bv-product-id",n),document.body.appendChild(e)}else{console.log("loading v1",n,t,a);const e=document.createElement("div");e.id="main",e.innerHTML='\n      <div id="schemaParent">\n        <div id="BVRRSummaryContainer"></div>\n\n        <br />\n\n        <div id="BVRRContainer">\n        </div>\n      </div>\n\n      <div id="BVQAContainer">\n      </div>\n\n      <div id="BVSYContainer">\n      </div>\n\n      <ul id="BVRRInlineRatings">\n      </ul>\n      <div id="BVSubmissionContainer"></div>',document.body.appendChild(e),console.log("appended maindiv",e),o.onload=()=>{$BV.configure("global",{productId:n}),"reviews"==t?$BV.ui("rr","show_reviews",{doShowContent:function(){}}):"questions"==t?$BV.ui("qa","show_questions",{doShowContent:function(){}}):"inline_rating"==t&&$BV.ui("rr","inline_ratings",{productIds:[n],containerPrefix:"BVRRInlineRating"})}}},t=new URLSearchParams(window.location.search),a=[{name:"client",default:""},{name:"dz",default:""},{name:"locale",default:"en_US"},{name:"env",default:"qa"},{name:"productId",default:"product1"},{name:"appName",default:"reviews"},{name:"containerPage",default:"false"},{name:"appVersion",default:"v2"},{name:"rawHTML",default:""}],o=a.reduce(((e,n)=>(e[n.name]=t.get(n.name)||n.default,e)),{}),{client:d,dz:i,locale:c,env:r,productId:l,appName:s,containerPage:m,appVersion:u,rawHTML:p}=o;let h="";const v=document.createElement("form");if(v.id="inputForm",a.forEach((e=>{const n=document.createElement("input");n.type="text",n.name=e.name,n.placeholder=e.default,n.value=o[e.name],v.appendChild(n)})),v.addEventListener("submit",(e=>{e.preventDefault();const n=new FormData(v),t=n.get("client"),a=n.get("dz"),o=n.get("locale"),d=n.get("env"),i=n.get("productId"),c=n.get("appName"),r=n.get("containerPage"),l=n.get("appVersion"),s=n.get("rawHTML");window.location.search=`?client=${t}&dz=${a}&locale=${o}&env=${d}&productId=${i}&appName=${c}&containerPage=${r}&appVersion=${l}&rawHTML=${s}`})),document.body.appendChild(v),""===d||""===i)h="client and dz are required",console.error(h);else{const t=((e,n,t,a,o)=>{let d="",i="";return"v2"===o?(i="stg"==t?"staging":"production",d=`/deployments/${e}/${n}/${i}/${a}/bv.js`):(i="stg"==t?"bvstaging/":"",d=`/${i}static/${e}/${n}/${a}/bvapi.js`),`https://${"v2"===o?"apps":"display"}${"qa"===t?`-${t}`:""}.bazaarvoice.com${d}`})(d,i,r,c,u);"v2"===u?(async(e,n)=>{try{const n=await fetch(e);return!!n.ok&&{filedata:(await n.text()).match(/\/\*([\s\S]*?)\*\//)[1]}}catch(e){return console.error(e),!1}})(t).then((a=>{const o=document.createElement("p");if(o.classList.add("message"),a||"v1"===u){if("true"===m)return void e(t,u);o.classList.add("success"),o.innerHTML="bv.js loaded successfully!",h="success",document.body.appendChild(o);const d=document.createElement("a");d.href=t,d.innerHTML=t,document.body.appendChild(d);const i=a.filedata.replace(/\*/g,"").split("\n"),c=document.createElement("ul");if(c.classList.add("description"),((e,n)=>{console.log("from here");let t=!1,a=null;e.forEach(((e,o)=>{if(e.includes("@")||e.includes("bv-loader")||e.includes("Capabilities")||e.includes("GMT"))if(t){const n=document.createElement("li");n.innerHTML=e,a.appendChild(n)}else{const o=document.createElement("li");if(e.includes("Capabilities")){t=!0;const e=document.createTextNode("Capabilities");o.appendChild(e);const n=document.createElement("ul");a=n,o.appendChild(n)}else if(e.includes("GMT")){console.log("before time",e);const n=function(e){const n=new Date(e),t=(new Date).getTime()-n.getTime(),a=Math.floor(t/36e5),o=Math.floor(t%36e5/6e4),d=Math.floor(t/864e5);let i;return i=d>0?`${d} day(s) ago`:a>0?`${a} hour(s) ago`:`${o} minute(s) ago`,`Converted Time in IST: ${n.toLocaleString("en-IN",{timeZone:"Asia/Kolkata"})}, Difference: ${i}`}(e);console.log("after time",n),e=`Last Deployed: ${n}`}else if(e.includes("bv-loader")){const n=e.match(/v\d+\.\d+\.\d+/);e=`BV Loader Version: ${n}`}e.includes("Capabilities")||o.appendChild(document.createTextNode(e)),n.appendChild(o)}}))})(i,c),document.body.appendChild(c),document.body.appendChild((e=>{const n=document.createElement("form");n.id="rawHTMLForm",n.innerHTML=`<textarea id="rawHTMLInput" rows="10" cols="50">${e}</textarea>`;const t=document.createElement("button");return t.type="submit",t.innerHTML="Append HTML",n.appendChild(t),n.addEventListener("submit",(e=>{e.preventDefault();const n=document.getElementById("rawHTMLInput").value,t=document.createElement("div");t.innerHTML=n,document.body.appendChild(t.innerHTML);const a=new URL(window.location.href);a.searchParams.set("rawHTML",n),window.history.pushState({},"",a)})),n})(p)),p&&""!==p){const e=document.createElement("div");e.innerHTML=p,document.body.appendChild(e)}n(t,l,s)}else o.classList.add("error"),o.innerHTML=`Something is wrong! bv.js does not exist for this combination!\n      <br>Constructed URL:\n      <br>\n      <a target="_blank" href="${t}">${t}</a>`,h="failed",document.body.appendChild(o)})):"v1"===u&&("true"===m?e(t,u):n(t,l,s)),document.body.innerHTML=`<h1>${h}</h1>`}})();