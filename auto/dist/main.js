(()=>{"use strict";const e=new URLSearchParams(window.location.search),t=e.get("client")||"",n=e.get("dz")||"",o=e.get("locale")||"en_US",a=e.get("env")||"qa",c=e.get("productId")||"product1",i=e.get("containerPage")||!1,d=e.get("appVersion")||"v2",r=e.get("rawHTML")||"";console.log("rawHTML11",r);let s="";if(""===t||""===n)s="client and dz are required",console.error(s);else{const e=((e,t,n,o,a)=>{let c="",i="";return"v2"===a?(i="stg"==n?"staging":"production",c=`/deployments/${e}/${t}/${i}/${o}/bv.js`):(i="stg"==n?"bvstaging/":"",c=`/${i}static/${e}/${t}/${o}/bvapi.js`),`https://${"v2"===a?"apps":"display"}${"qa"===n?`-${n}`:""}.bazaarvoice.com${c}`})(t,n,a,o,d);(async(e,t)=>{try{const t=await fetch(e);return!!t.ok&&{filedata:(await t.text()).match(/\/\*([\s\S]*?)\*\//)[1]}}catch(e){return console.error(e),!1}})(e).then((t=>{console.log("result",t);const n=document.createElement("p");if(n.classList.add("message"),t||"v1"===d){if(i)return document.body.innerHTML="",document.head.innerHTML="",console.log("appVersion",d,e),void document.write(((e,t)=>"v2"===t?`<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8" />\n    <title></title>\n    <meta name="robots" content="noindex, nofollow">\n    \x3c!-- You can use either the relative or the absolute path to the canonical URL. For example, if the page is hosted --\x3e\n    \x3c!-- at http://www.example.com/path/to/container.html, you can enter the canonical URL "container.html" or the full path. --\x3e\n    <link rel="canonical" href="container.htm" />\n    <meta name="bv:pageType" content="container">\n  </head>\n  <body>\n    <script type="text/javascript" src="${e}"><\/script>\n  </body>\n</html>`:`<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8"/>\n    <title></title>\n    <meta name="robots" content="noindex, nofollow">\n    <link rel="canonical" href="container.htm"/>\n  </head>\n  <body>\n    <script type="text/javascript" src="${e}"><\/script>\n    <script>\n      $BV.container('global', {} );\n    <\/script>\n  </body>\n</html>`)(e,d));n.classList.add("success"),n.innerHTML="bv.js loaded successfully!",s="success",document.body.appendChild(n);const o=document.createElement("a");o.href=e,o.innerHTML=e,document.body.appendChild(o);const a=t.filedata.replace(/\*/g,"").split("\n"),l=document.createElement("ul");l.classList.add("description"),((e,t)=>{console.log("from here");let n=!1,o=null;e.forEach(((e,a)=>{if(e.includes("@")||e.includes("bv-loader")||e.includes("Capabilities")||e.includes("GMT"))if(n){const t=document.createElement("li");t.innerHTML=e,o.appendChild(t)}else{const a=document.createElement("li");if(e.includes("Capabilities")){n=!0;const e=document.createTextNode("Capabilities");a.appendChild(e);const t=document.createElement("ul");o=t,a.appendChild(t)}else if(e.includes("GMT")){console.log("before time",e);const t=function(e){const t=new Date(e),n=(new Date).getTime()-t.getTime(),o=Math.floor(n/36e5),a=Math.floor(n%36e5/6e4),c=Math.floor(n/864e5);let i;return i=c>0?`${c} day(s) ago`:o>0?`${o} hour(s) ago`:`${a} minute(s) ago`,`Converted Time in IST: ${t.toLocaleString("en-IN",{timeZone:"Asia/Kolkata"})}, Difference: ${i}`}(e);console.log("after time",t),e=`Last Deployed: ${t}`}else if(e.includes("bv-loader")){const t=e.match(/v\d+\.\d+\.\d+/);e=`BV Loader Version: ${t}`}e.includes("Capabilities")||a.appendChild(document.createTextNode(e)),t.appendChild(a)}}))})(a,l),document.body.appendChild(l);const m=document.createElement("form");m.id="rawHTMLForm",m.innerHTML=`<textarea id="rawHTMLInput" rows="10" cols="50">${r}</textarea>`;const p=document.createElement("button");if(p.type="submit",p.innerHTML="Append HTML",m.appendChild(p),m.addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("rawHTMLInput").value,n=document.createElement("div");n.innerHTML=t,document.body.appendChild(n);const o=new URL(window.location.href);o.searchParams.set("rawHTML",t),window.history.pushState({},"",o)})),document.body.appendChild(m),r&&""!==r){console.log("rawHTML",r);const e=document.createElement("div");e.innerHTML=r,document.body.appendChild(e)}const u=document.createElement("script");u.src=e,document.head.appendChild(u);const h=document.createElement("div");h.id="product",h.setAttribute("data-bv-show","reviews"),h.setAttribute("data-bv-product-id",c),document.body.appendChild(h)}else n.classList.add("error"),n.innerHTML=`Something is wrong! bv.js does not exist for this combination!\n      <br>Constructed URL:\n      <br>\n      <a target="_blank" href="${e}">${e}</a>`,s="failed",document.body.appendChild(n)}))}document.body.innerHTML=`<h1>${s}</h1>`})();